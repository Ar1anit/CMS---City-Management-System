<!-- Vorlage für die gesamte Seite -->
{% include 'chat_bot.html' %}

<head>
    <title>Diskussionsforum</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Crimson+Pro">

    <link rel="shortcut icon" href="../static/images/favicon.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="../static/favouriteDatasets.css">
    <link rel="stylesheet" type="text/css" href="../static/Startpage.css">
    <link rel="stylesheet" type="text/css" href="../static/diskussion.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
            crossorigin="anonymous"></script>
    <script src="../static/favouriteDatasets.js" defer></script>
    <script src="../static/diskussion.js" defer></script>
</head>

<nav class="navbar navbar-expand-lg bg-body-tertiary mb-5"
     style="background: linear-gradient(to left, #000000 13%, #FFFFFF );">
    <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo03"
                aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="#">
            <img style="width: 80px; height: 80px;" src="../static/images/LogoF.png" alt="Logo">
        </a>

        <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link " aria-current="page" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/dataset">Datensätze</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link " href="/diskussionen">Diskussionsforum</a>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle " href="#" role="button" data-bs-toggle="dropdown"
                       aria-expanded="false">
                        Mein Profil
                    </a>
                   <ul class="dropdown-menu">
                        <li><a class="dropdown-item">Hallo, {{ vorname }}</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="/profile/{{ username }}">Zur Profilansicht</a></li>
                        <li><a class="dropdown-item" href="/fav-datasets">Lieblingsdatensätze</a></li>
                        <li><a class="dropdown-item" href="/tickets">Support-Tickets</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="/agb">AGBs</a></li>
                        <li><a class="dropdown-item" href="/logout">Abmelden</a></li>
                    </ul>
            </ul>
            <div class="d-flex" role="search" style="border: none; padding-top: 10px; margin-right: 40px;">
                <button style="background-color: black; color: white; border: none; border-radius: 9px; width: 100%;
                    transition: background-color 0.3s, color 0.3s;"
                        onmouseover="this.style.backgroundColor = 'white'; this.style.color = 'black';"
                        onmouseout="this.style.backgroundColor = 'black'; this.style.color = 'white';" onclick="showCreateDiskussion();">
                    <span style="font-size: 22px;">+</span>
                    Antworten
                </button>
            </div>
        </div>
    </div>
</nav>

<div class="create-ticket-container hidden" style="display: none;" id="create-ticket-container">
    <center>
    <textarea class="text-input" placeholder="Antwort" style="height: 20vh; margin-bottom: 10px; resize: none;" tabindex="3" name='reply-text' id='reply-text'></textarea><br>
    <button class="create-ticket-button red-button" tabindex="5" onclick="showCreateDiskussion();">Abbruch</button>
    <button class="create-ticket-button green-button" tabindex="4" onclick="postReply('{{ diskussion.id }}');">Antworten</button>
</center>
</div>

<!-- Diskussionspost -->
<div class="dis-container">
 <div class="dis-container-header"><img class="dis-container-pfp" src="{{ profile_picture }}"/>
     <div class="dis-container-username">
    <a href="#">{{ diskussion.author }}</a>
    <div class="dis-container-buttons">
        <button style="width: 90px;margin-left: 150px; border-radius:10px; background: red; color: white;" onclick="window.location.href='/discussion/{{ diskussion.id }}/like'">{{ likes }} Likes</button>
        <button style="width: 150px; border-radius:10px; background: #e5e5e5; color: black;" onclick="window.location.href='/discussion/{{ diskussion.id }}/bookmark'">{{ bookmarks }} Lesezeichen</button>
    </div>
</div>

 </div>
    <div class="dis-container-title">
        <h5 class="card-title"><a href="/diskussion/{{ diskussion.id }}">{{ diskussion.content }}</a></h5>
    </div>
    <div class="dis-container-text">
        <p class="card-text">{{ diskussion.title }}</p>
    </div>
</div>

<div class="vertical-line"></div>

<!-- Kommentare -->
{% if posts %}
    {% for post in posts %}
    <div class="dis-container">
        <div class="dis-container-header"><img class="dis-container-pfp" src="../static/images/background2.jpg"/><div class="dis-container-username"><a href="/profile/{{ post[2] }}">{{ post[2] }}</a>{% if rechte == "admin" %}<button style="margin-left: 350px; border: 1px solid #7c7c7c;width: 150px; border-radius: 10px" onclick="window.location.href='/discussion/{{ diskussion.id }}/reply/delete/{{ post[0] }}'">Beitrag löschen</button>{% endif %}</div></div>        <div class="dis-container-text">
            <p class="card-text">{{ post[4] }}</p>
        </div>
    </div>

    <div class="vertical-line"></div>
    {% endfor %}
{% else %}
    <p>Es gibt derzeit keine Posts in dieser Diskussion.</p>
{% endif %}
